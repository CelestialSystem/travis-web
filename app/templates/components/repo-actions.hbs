<Modal
  @isVisible={{this.isShowingConfirmationModal}}
  class="repo-actions-modal"
>
  <div class="repo-actions-modal__top">
    <h3 class="repo-actions-modal__header">
      Prioritize your build
    </h3>
    <button
      type="button"
      title="Close modal"
      class="pointer repo-actions-modal__close-button"
      autofocus={{this.focusOnModal}}
      onclick={{action "toggleConfirmationModal"}}
      disabled={{this.isLoading}}
    >
      <SvgImage @name="icon-failed" @class="icon" />
    </button>
  </div>
  <div class="repo-actions-modal__body">
    <p>
      Bypass your scheduled build by fast tracking this one.
    </p>
    <p class="label-align">
      SELECT AN OPTION
    </p>
    <div>
      {{#each this.options as |option|}}
        {{#let (eq this.selectionKey option.key) as |selected|}}
          <button
            data-test-repo-actions-item-selected={{selected}}
            autofocus={{and this.focusOnList selected}}
            class="repo-actions-item {{if selected 'repo-actions-item--selected'}}"
            onclick={{action (mut this.selectionKey) option.key}}
          >
            <span class="repo-actions-item__radio"></span>
            <span class="repo-actions-item__description">
              {{option.description}}
            </span>
          </button>
        {{/let}}
      {{/each}}
    </div>
  </div>
  <br />
  <div class="repo-actions-modal__controls">
    <button
      type="button"
      class="button button--blue"
      onclick={{action (perform this.increasePriority)}}
    >
    {{#if this.isLoading}}
      <LoadingIndicator class="loading-indicator"/><span>Prioritizing the build</span>
    {{else}}
    <span>Prioritize build</span>
    {{/if}}
    </button>
    {{#if (not this.isLoading)}}
    <button
      role="button"
      class="button button--red"
      onclick={{action "toggleConfirmationModal"}}
      disabled={{this.isLoading}}
    >
      Cancel
    </button>
    {{/if}}
  </div>
</Modal> 

{{#if this.canCancel}}
  {{#if this.cancel.isRunning}}
    <LoadingIndicator @height={{true}} />
  {{else}}
    <div class="action-button-container">
      <button
        data-test-repo-actions-cancel-button
        class="action-button--cancel"
        type="button"
        aria-label="Cancel {{this.type}}"
        {{action (perform this.cancel)}}
      >
        {{#if this.tooltips}}
          <EmberTooltip class={{if this.mobilelabels "hidden-on-mobile"}}>
            Cancel {{this.type}}
          </EmberTooltip>
        {{/if}}
        <SvgImage @name="icon-failed" @class="icon" />
        <span class="label-align">
          Cancel {{this.type}}
        </span>
      </button>
    </div>
  {{/if}}
  {{#if (and (not this.build.priority) this.isQueued)}}
    <div class="action-button-container">
        {{#if (not this.userHasPushPermissionForRepo)}}
          <EmberTooltip
          class={{if this.mobilelabels "hidden-on-mobile"}} 
          @text="This action can be triggered only by users with push access to the repository" />
        {{/if}}
      <button 
        type="button"
        class="action-button--Priortize"
        {{!-- onclick={{action "increasePriority"}} --}}
        {{!-- {{on 'click' (fn (mut this.showCancelModal) true)}} --}}
        onclick={{action "toggleConfirmationModal"}}
        disabled={{not this.userHasPushPermissionForRepo}}
      >
        {{#if this.tooltips}}
          <EmberTooltip class={{if this.mobilelabels "hidden-on-mobile"}}>
            Prioritize build
          </EmberTooltip>
        {{/if}}
        <SvgImage @name="icon-priortize" @class="icon" />
        <span class="label-align">
          Prioritize build
        </span>
      </button>
    </div>
  {{/if}}
{{else if this.canRestart}}
  {{#if this.restarters.isRunning}}
    <LoadingIndicator @height={{true}} />
  {{else}}
    <div class="action-button-container">
      <button
        class="action-button--restart"
        aria-label="Restart {{this.type}}"
        type="button"
        {{action (perform this.restart)}}
      >
        {{#if this.tooltips}}
          <EmberTooltip class={{if this.mobilelabels "hidden-on-mobile"}}>
            Restart {{this.type}}
          </EmberTooltip>
        {{/if}}
        <SvgImage @name="icon-restart" @class="icon" />
        <span class="label-align">
          Restart {{this.type}}
        </span>
      </button>
    </div>
    {{#if (and this.features.debugBuilds this.canDebug)}}
      <div class="action-button-container">
        <button
          data-test-repo-actions-debug-button
          class="action-button--debug"
          aria-label="Restart as debug {{type}}"
          type="button"
          {{action (perform this.debug)}}
        >
          {{#if this.tooltips}}
            <EmberTooltip class={{if this.mobilelabels "hidden-on-mobile"}}>
              Restart as debug {{this.type}}
            </EmberTooltip>
          {{/if}}
          <SvgImage @name="icon-debug" @class="icon" />
          <span class="label-align">
            Debug {{this.type}}
          </span>
        </button>
      </div>
    {{/if}}
  {{/if}}
{{else}}
  {{#if this.userHasPullPermissionForRepo}}
    <LoadingIndicator />
  {{/if}}
{{/if}}
